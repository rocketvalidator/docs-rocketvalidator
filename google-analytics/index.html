<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://docs.rocketvalidator.com/google-analytics/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Google Analytics - Rocket Validator Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/codehilite/borland.css" rel="stylesheet" />
        <link href="../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Google Analytics";
        var mkdocs_page_input_path = "google-analytics.md";
        var mkdocs_page_url = "/google-analytics/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script>

<meta property="og:url" content="https://docs.rocketvalidator.com/google-analytics/"> 
<meta property="og:title" content="Google Analytics - Rocket Validator Documentation"> 

<meta property="og:description" content="Documentation site for Rocket Validator - automated accessibility scanner for large sites">
<meta property="og:image" content="https://docs.rocketvalidator.com/img/docs-screenshot.jpg">
<meta property="og:image:alt" content="Documentation site for Rocket Validator - automated accessibility scanner for large sites">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<meta name="twitter:site" content="@rocketvalidator">
<meta name="twitter:card" content="summary"> 
<meta name="twitter:title" content="Google Analytics - Rocket Validator Documentation"> 

<meta name="twitter:description" content="Documentation site for Rocket Validator - automated accessibility scanner for large sites">
<meta name="twitter:image" content="https://docs.rocketvalidator.com/img/docs-screenshot.jpg">
<meta name="twitter:image:alt" content="Screenshot of documentation site">

<!-- Plausible analytics -->
<script async defer data-domain="docs.rocketvalidator.com" src="https://plausible.io/js/plausible.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../img/rocket-icon-300x300.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quick-start/">Quick Start</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../summary-reports/">Summary Reports</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../device-viewport-emulation/">Device Viewport Emulation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../rate-limits/">Rate Limiting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../scheduling/">Scheduling Reports</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../deploy-hooks/">Deploy Hooks</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../domain-stats/">Domain Stats</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../muting/">Muting Issues</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../performance-tips/">Performance Tips</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../broken-links-checker/">Broken Links Checker</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../user-agents/">User Agents</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Google Analytics</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#not-rendering-the-google-analytics-script">Not rendering the Google Analytics script</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#filtering-out-from-google-analytics">Filtering out from Google Analytics</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#setting-up-google-analytics-via-google-tag-manager">Setting up Google Analytics via Google Tag Manager</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#create-a-custom-dimension-for-user-agent">Create a custom dimension for User Agent</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#create-a-variable-in-google-tag-manager">Create a variable in Google Tag Manager</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#define-a-custom-dimension-in-google-analytics-settings">Define a custom dimension in Google Analytics Settings</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#create-a-filter-in-google-analytics">Create a filter in Google Analytics</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../how-to-validate-your-local-server/">Validating your local server</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../guest-accounts/">Guest Accounts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faqs/">FAQs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/authorization/">Authorization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/pagination/">Pagination</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/resources/">Resources</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/reports/">Reports</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/web_pages/">Web Pages</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/a11y_issues/">Accessibility Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/html_issues/">HTML Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/common_a11y_issues/">Common Accessibility Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/common_html_issues/">Common HTML Issues</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/schedules/">Schedules</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/mutings/">Mutings</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/client-libraries/">Client Libraries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../api/changelog/">Changelog</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Rocket Validator Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Google Analytics</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="excluding-rocket-validator-bots-from-google-analytics-traffic">Excluding Rocket Validator Bots from Google Analytics Traffic</h1>
<p>As explained in the <a href="/user-agents">User Agents</a> section, when you validate a site with Rocket Validator, your server will be visited by 3 different systems: Link Spider, HTML Checker and Accessibility Checker.</p>
<p>The first two will just get the static HTML content, but the Accessibility Checker behaves like a real browser (using Headless Chrome), so it's going to execute JavaScript in the visited pages - and that includes the Google Analytics script, if it's there.</p>
<p>So, it's perfectly normal to see a spike in the Google Analytics traffic when you're validating a site. But in most cases, you can prefer to exclude this traffic from the stats.</p>
<p>There are 2 options to do that, let's explore them.</p>
<h2 id="not-rendering-the-google-analytics-script">Not rendering the Google Analytics script</h2>
<p>This option may be the simpler method, if your web site can detect the User Agent string from the request. It may not be an option in certain cases like static sites.</p>
<p>If you can do that, then it's simple: in case the User Agent string contains <code>RocketValidator</code>, don't include the script that triggers Google Analytics.</p>
<p>However, we don't recommend this option as it's preferable to not customize your content based on User Agents, so the bots can have "the real thing". Let's say a script introduces an accessibility issue, you're not going to detect it if you hide it from the bots.</p>
<h2 id="filtering-out-from-google-analytics">Filtering out from Google Analytics</h2>
<p>The second option requires a bit more work to set up but it's cleaner. There's nothing to set up on your server and the content stays the same. What you need to to instead is tell Google Analytics to filter out requests depending on the User Agent string.</p>
<h3 id="setting-up-google-analytics-via-google-tag-manager">Setting up Google Analytics via Google Tag Manager</h3>
<p>First step is having Google Analytics installed via the Google Tag Manager. This way, it's easy to extend it with custom dimensions, like the User Agent.</p>
<p>Follow this guide: <a href="https://support.google.com/tagmanager/answer/6107124?hl=en">Deploy Google Analytics with Tag Manager</a>.</p>
<h3 id="create-a-custom-dimension-for-user-agent">Create a custom dimension for User Agent</h3>
<p>Next, go to your Google Analytics admin panel. Click on "Custom Definitions" in the "Property" column, and select "Custom Dimensions". Create a new Custom Dimension with the name "User Agent".</p>
<p><img alt="Add Custom Dimension form screenshot" src="/img/google-analytics/01.png" /></p>
<p>Write down the "Index" value for the created Custom Dimension as we'll need it later.</p>
<p><img alt="Custom Dimension index screenshot" src="/img/google-analytics/02.png" /></p>
<h3 id="create-a-variable-in-google-tag-manager">Create a variable in Google Tag Manager</h3>
<p>Now, go to your Google Tag Manager account and click on "Variables" on the left-hand side menu. Click on "New" under "User-Defined Variables". Set the name as "User Agent", the Variable Type as "JavaScript Variable" and the Global Variable Name as <code>navigator.userAgent</code>. Click on "Save". This will set up a JavaScript variable that will store the User Agent string, so it can be passed to Google Analytics.</p>
<p><img alt="JavaScript Variable form screenshot" src="/img/google-analytics/03.png" /></p>
<h3 id="define-a-custom-dimension-in-google-analytics-settings">Define a custom dimension in Google Analytics Settings</h3>
<p>Still on the Google Tag Manager Variables section, click on the Google Analytics Settings variable:</p>
<p><img alt="User-Defined Variables screenshot" src="/img/google-analytics/04.png" /></p>
<p>Edit the tag settings, open "Custom Dimensions" and click on "Add Custom Dimension". Set the index to the index matching the custom dimension in your Google Analytics account. Set the Dimension Value to <code>{{User Agent}}</code>.</p>
<p><img alt="Add Custom Dimension form screenshot" src="/img/google-analytics/05.png" /></p>
<p>This will pass the User Agent to Google Analytics. Remember to Publish your changes in Google Tag Manager so they're enabled.</p>
<h3 id="create-a-filter-in-google-analytics">Create a filter in Google Analytics</h3>
<p>The last step is going back to your Google Analytics account, Admin section. Click on "Filters" on the "View" column. Click on "Add Filter". Set the Filter Name as "User-Agent RocketValidator". Choose "Custom" in Filter Type. In the Exclude option, select the field "User-Agent" on the Custom Dimensions. And, in Filter Pattern, use this regular expression: <code>.*RocketValidator.*</code>.</p>
<p><img alt="Google Analytics Filter screenshot" src="/img/google-analytics/06.png" /></p>
<p>And that's it! It may take some time for the filter to take effect (but in most cases it's just a matter of minutes). This method does not remove traffic retroactively - it can only filter out traffic happening after the creation of the filter.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../user-agents/" class="btn btn-neutral float-left" title="User Agents"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../how-to-validate-your-local-server/" class="btn btn-neutral float-right" title="Validating your local server">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../user-agents/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../how-to-validate-your-local-server/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../js/extra.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
